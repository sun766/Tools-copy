Reel=function(a,b){var c=!1,d=new FJ.View(b);d.id(a+"-reel");var e=new BackgroundMedia;e.scaleMode=BackgroundMedia.FILL,e.dispatcher.addEventListener(function(){var a=new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,"home");FJ.Application.broadcast(a)}),d.add(e);var f=new VideoControls;d.add(f),f.onMute=e.mute,f.onUnmute=e.unMute,f.onPlay=function(){f.setPlayState(!0),e.resume()},f.onPause=function(){f.setPlayState(!1),e.pause()};var g=new ViewState(a,-1,-1,d,function(b){return b.head==a&&!b.isHeadOnly()});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:g.onNavigation(a.slug),g.isVisible()?h():(e.clear(),f.deactivate());break;case Tool.Actions.MSG_RESIZE:g.onResize(),g.isVisible()?e.activate():e.deactivate();break;case Tool.Actions.MSG_ON_DATA_LOADED:g.isVisible()&&h();break;case Tool.Actions.MSG_WINDOW_FOCUS:c&&(c=!1,e.resume());break;case Tool.Actions.MSG_WINDOW_BLUR:e.checkPaused()||(c=!0,e.pause())}};var h=function(){if(GlobalBackground.setColor("#000"),GlobalBackground.lockScroll(),!BaseView.requestData("home",Tool.Actions.V_HOME,Tool.Actions.DT_HOME)){var b=FJ.Application.model.data[a];e.load(getVideoUrl(b.splashVideo)),f.setPlayState(!0),f.setMuteState(!1),f.activate()}}},CloseButton=function(a,b){var c,d,e=0,f=!1,g=new FJ.View(b);g["class"]("close-button");var h=function(){g.opacity(1)},i=function(){g.opacity(0)},j=new AutoHide(h,i,2500);g.div.addEventListener("mouseover",function(a){f&&j.cancel()}),g.div.addEventListener("mouseout",function(a){f&&j.start()}),g.registerClick(function(a){var b=new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,d);FJ.Application.broadcast(b)});var k=new ViewState(a,Tool.Actions.VISIBILITY_THRESHOLD,-1,g,function(a){var b=a.head==Tool.Actions.V_HOME&&!a.isHeadOnly(),e=-1!=a.head.indexOf(Tool.Actions.V_WRK)&&!a.isHeadOnly()&&a.parts[1]!=Tool.Actions.V_TAG,f=e&&a.parts[2]==Tool.Actions.V_CASESTUDY,g=e&&a.parts[2]==Tool.Actions.V_VIDEO;(f||g)&&(e=!1);var h=a.head==Tool.Actions.V_DIR_REEL,i=c&&c.head==Tool.Actions.V_DIR_ITEM,j=c&&c.head==Tool.Actions.V_VR360,k=c&&c.parts[2]==Tool.Actions.V_CASESTUDY,l=(c&&c.parts[2]==Tool.Actions.V_DIR_REEL,c&&-1!=c.head.indexOf(Tool.Actions.V_WRK)&&!c.isHeadOnly()&&c.parts[1]==Tool.Actions.V_TAG),m=b||h||e||f||g;return console.log("wasVR360",j,c),b&&(d="home"),(f||g)&&(d="work/"+a.parts[1]),e&&(d=c&&!k?c.slug:Tool.Actions.V_WRK),h&&(d="director/"+a.parts[1]),i&&(d="director/"+c.parts[1]),l&&(d=c.parts.join("/")),e&&j&&(d="vr360"),void 0==d&&(d=Tool.Actions.V_WRK),m});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:e++,k.onNavigation(a.slug),c=new FJ.Slug(a.slug);break;case Tool.Actions.MSG_RESIZE:k.onResize();break;case Tool.Actions.MSG_VIDEO_START:f=!0,j.start();break;case Tool.Actions.MSG_VIDEO_STOP:f=!1,j.cancel()}}},BufferingInfo=function(a,b){var c=new FJ.View(b);c["class"]("buffering-info"),c.show();var d={lines:11,length:5,width:3,radius:10,corners:0,rotate:0,direction:1,color:"#808080",speed:1.1,trail:72,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"0",left:"0"},e=new Spinner(d),f=function(){c.opacity(1),e.spin(c.div)},g=function(){c.opacity(0),e.stop()};g(),FJ.Application.createMediator().update=function(a){switch(a.message){case Tool.Actions.MSG_VIDEO_BUFFER_START:f();break;case Tool.Actions.MSG_VIDEO_BUFFER_STOP:g()}}},Subnavi=function(a,b){var c,d=new FJ.View(b);d.id(a);var e=new ViewState(a,Tool.Actions.VISIBILITY_THRESHOLD,-1,d,function(a){var b=a.head==Tool.Actions.V_DIR&&!a.isHeadOnly();return b});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:e.onNavigation(a.slug);break;case Tool.Actions.MSG_RESIZE:e.onResize();break;case Tool.Actions.MSG_OPEN_SUBNAVI:c=a.data,d.visible?(g(),setTimeout(f,100)):f();break;case Tool.Actions.MSG_UPDATE_SUBNAVI:h(a.data);break;case Tool.Actions.MSG_CLOSE_SUBNAVI:}};var f=function(){BaseView.loadTemplate(c.template,function(a){a.execute(d.div,c),d.show(),d.animation.set("subnavi-slide-in",.2,"ease-out",.05,null,"backwards");var b=c["default"]||0;h(e.lastSlug.parts[1]||c.navi[b].name)})},g=function(){d.animation.set("subnavi-slide-out",.1,"ease-in",0,d.hide,"forwards")},h=function(b){if(c){var d=document.querySelectorAll("#"+a+" ul li"),e=b||c.navi[0].name;e=e.toLowerCase();for(var f=0;f<d.length;f++)c.navi[f].name.toLowerCase()==e?d[f].setAttribute("class","active"):d[f].setAttribute("class","")}}},WorkSubnavi=function(a,b){var c,d,e=new FJ.View(b);e.id(a);var f=new ViewState(a,Tool.Actions.VISIBILITY_THRESHOLD,-1,e,function(a){var b=a.head==Tool.Actions.V_WRK&&(a.isHeadOnly()||a.parts[1]==Tool.Actions.V_TAG);return b});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:f.onNavigation(a.slug),k(f.lastSlug.parts[2]);break;case Tool.Actions.MSG_RESIZE:f.onResize();break;case Tool.Actions.MSG_OPEN_WORK_SUBNAVI:c=a.data,g()}};var g=function(){return d?void k(f.lastSlug.parts[2]):void BaseView.loadTemplate("data/templates/subnavi/work-list-menu.html",function(a){d=a,c&&d.execute(e.div,{defaultTags:c});for(var b=document.querySelectorAll(".link"),f=0;f<b.length;f++){var h=new FJ.ElementWrapper(b[f]);h.registerClick(function(){var a="work/tag/"+h.div.getAttribute("data");return function(){var b=new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,a);FJ.Application.broadcast(b)}}())}j(),e.animation.set("subnavi-slide-in",.2,"ease-out",.05,null,"backwards"),g()})},h=function(a){document.activeElement==document.getElementById("tag-search-field")&&13==a.keyCode&&i()},i=function(){var a=document.getElementById("tag-search-field").value;if(a){var b=encodeURIComponent(a),c=new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,"work/tag/"+b);FJ.Application.broadcast(c)}},j=function(){var a=document.getElementById("tag-search-button");a=new FJ.ElementWrapper(a),a.registerClick(i),FJ.Capabilities.touch||document.addEventListener("keydown",h)},k=function(b){if(c){b=b||Tool.Actions.V_DEFAULT_TAG,b=decodeURIComponent(b),b.length>20&&(b=b.substring(0,20)+"...");var d=c.indexOf(b)>-1,e=document.getElementById("tag-search-results"),f=document.querySelectorAll("#"+a+" ul li");if(d){e&&(e.setAttribute("class",""),window.innerWidth<Tool.Actions.TABLET_THRESHOLD&&(e.style.display="none"));for(var g=0;g<f.length;g++)f[g].style.display="",g==c.indexOf(b)?f[g].setAttribute("class","active"):f[g].setAttribute("class","")}else{e&&(e.innerHTML='<a href="#/work/tag/'+b+'"><small>RESULTS FOR </small>'+b+"</a>",e.setAttribute("class","active"),e.style.display="");for(var g=0;g<f.length;g++)f[g].setAttribute("class",""),window.innerWidth<Tool.Actions.TABLET_THRESHOLD&&(f[g].style.display="none")}}}},SoftSubnavi=function(a,b){var c,d=new FJ.View(b);d.id(a);var e=new ViewState(a,Tool.Actions.VISIBILITY_THRESHOLD,-1,d,function(a){var b=a.head==Tool.Actions.V_DIR_ITEM||a.head==Tool.Actions.V_CNT;return b});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:e.onNavigation(a.slug);break;case Tool.Actions.MSG_RESIZE:e.onResize();break;case Tool.Actions.MSG_OPEN_SOFT_SUBNAVI:c=a.data,f()}};var f=function(){BaseView.loadTemplate(c.template,function(a){a.execute(d.div,c),d.show(),d.animation.set("subnavi-slide-in",.2,"ease-out",.05,null,"backwards");for(var b=0;b<c.navi.length;b++){var e=new FJ.ElementWrapper(document.getElementById("soft-subnavi-"+c.navi[b].section));e.registerClick(function(a){return a.section?function(){var b=new FJ.Notification(Tool.Actions.MSG_ON_SOFT_SUBNAVI);b.data=a.section,FJ.Application.broadcast(b)}:a.slug?function(){var b=new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,a.slug);-1!=a.name.indexOf("live-action")&&(b.slug="directors/live-action"),FJ.Application.broadcast(b)}:void 0}(c.navi[b]))}})}},About=function(a,b){var c,d=new FJ.View(b);d.id(a);var e=new ViewState(a,Tool.Actions.VISIBILITY_THRESHOLD,-1,d,function(b){return b.head==a});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:e.onNavigation(a.slug),e.isVisible()?e.m==e.IN_NEW&&f():h();break;case Tool.Actions.MSG_RESIZE:e.onResize(),e.isVisible()?g():h();break;case Tool.Actions.MSG_ON_DATA_LOADED:e.isVisible()&&f()}};var f=function(){if(GlobalBackground.setColor("#000"),GlobalBackground.lockScroll(),!BaseView.requestData(a,a,Tool.Actions.DT_ABOUT)){if(!c)return void BaseView.loadTemplate(Tool.Actions.TP_ABOUT,function(a){c=a,f()});i(),g()}},g=function(){e.isVisible()&&Tool.Actions.MSG_CLOSE_SUBNAVI},h=function(){},i=function(){var b=FJ.Application.model.data[a];c.execute(d.div,b)}},Awards=function(a,b){var c,d,e=new FJ.View(b);e.id(a);var f=new ViewState(a,Tool.Actions.VISIBILITY_THRESHOLD,-1,e,function(b){return b.head==a});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:f.onNavigation(a.slug),f.isVisible()?f.m==f.IN_NEW&&g():i();break;case Tool.Actions.MSG_RESIZE:f.onResize(),f.isVisible()?h():i();break;case Tool.Actions.MSG_ON_DATA_LOADED:f.isVisible()&&g()}};var g=function(){if(GlobalBackground.setDottedPattern(),GlobalBackground.lockScroll(),!BaseView.requestData(a,a,Tool.Actions.DT_AWARDS)){if(!c)return void BaseView.loadTemplate(Tool.Actions.TP_AWARDS,function(a){c=a,g()});j(),k(),h()}},h=function(){!f.isVisible()},i=function(){},j=function(){var a=FJ.Application.model.data.awards;l(a),c.execute(e.div,a)},k=function(){d=new AwardsHeader(FJ.Application.model.data.awards.total),d.animate()},l=function(a){for(var b=a.projects.length,c=0;b>c;c++){var d=a.projects[c];if(d.direction instanceof Array){for(var e=d.direction.length,f={},g="",h=0;e>h;h++)for(var i=d.direction[h].role.split(","),j=d.direction[h].name,k=d.direction[h].slug,l=0;l<i.length;l++){var m=i[l].trim().toLowerCase();f[m]||(f[m]=[]),f[m].push(j+"/"+k)}for(var m in f){var n=f[m];n.sort();var l=0;for(n.length>1&&(m+="s"),g+="<h5>"+m+"</h5>";l<n.length;l++){var j=n[l].split("/")[0],k=n[l].split("/")[0];j.toLowerCase().indexOf("tool")>-1&&(j='<a href="'+k+'">'+j+"</a>"),g+="<h6>"+j+"</h6>",l<n.length-1&&(g+=", ")}}d.direction=g}if(d.awards instanceof Array){for(var i="",h=0;h<d.awards.length;h++)i+="<div><span class='icon icon-"+d.awards[h][0].toLowerCase()+"'></span><h4>"+d.awards[h][1]+"</h4></div>";d.awards=i}d.index=c}}},Contact=function(a,b){var c,d=new FJ.View(b),e=new WorldNodeGarden;d.add(e);var f=new FJ.View;f.id(a),d.add(f);var g=new FJ.VirtualScroll("connect-scroll",.2),h=new ViewState(a,720,-1,d,function(b){return b.head==a});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:h.onNavigation(a.slug),h.isVisible()?i():k();break;case Tool.Actions.MSG_RESIZE:h.onResize(),h.isVisible()?j():k();break;case Tool.Actions.MSG_ON_SOFT_SUBNAVI:h.isVisible()&&p(a.data);break;case Tool.Actions.MSG_ON_DATA_LOADED:h.isVisible()&&i()}};var i=function(){if(GlobalBackground.setDottedPattern(),GlobalBackground.lockScroll(),e.clear(),!BaseView.requestData(a,a,Tool.Actions.DT_CONNECT)){if(!c)return void BaseView.loadTemplate(Tool.Actions.TP_CONNECT,function(a){c=a,i()});l(),j()}},j=function(){g.dispatcher.addEventListener(o),n()},k=function(){g.dispatcher.removeEventListener(o)},l=function(){g.reset();var b=FJ.Application.model.data[a];f.opacity(0);for(var d=b.sales.length,e=0;d>e;e++){b.sales[e].membersHTML="";for(var h=b.sales[e].members,i=0;i<h.length;i++){var j="";j+="<li>",j+="<h2>"+h[i].name+"</h2>";var k=h[i].email.split(",");if(h[i].title)for(var l=h[i].title.split(","),n=0,o=l.length;o>n;n++){var p=k[n];j+="<h3>"+l[n]+"</h3>",k.length>1&&(j+="<a class='full' href='mailto:"+p+"'>"+p+"</a>")}h[i].phone&&(j+="<h4>"+h[i].phone+"</h4>"),1==k.length&&(j+="<a class='full' href='mailto:"+h[i].email+"'>"+h[i].email+"</a>"),h[i].representing&&(j+="<h5>representing</h5>",j+="<a class='represented'>"+h[i].representing+"</a>"),j+="</li>",b.sales[e].membersHTML+=j}}c.execute(f.div,b),setTimeout(m,100)},m=function(){f.opacity(1);var b="cubic-bezier(0, .60, .58, 1)",c=document.getElementsByClassName("office-symbol"),d=document.getElementsByClassName("office-city"),g=document.getElementsByClassName("office-details"),h=document.getElementsByClassName("networks")[0],i=document.getElementsByClassName("contacts")[0];BaseView.animateIn(i,"connect-contacts-slideup",.3,"ease-out",0,"backwards"),BaseView.animateIn(h,"connect-networks-slideup",.2,"ease-in",.1,"backwards"),BaseView.animateIn(g[0],"connect-detail-slideup",.2,"ease-out",.2,"backwards"),BaseView.animateIn(g[1],"connect-detail-slideup",.2,"ease-out",.3,"backwards"),BaseView.animateIn(g[2],"connect-detail-slideup",.2,"ease-out",.4,"backwards");var j=c;BaseView.animateIn(j[0],"connect-symbol-scaleleft",.2,"ease-in",.4,"backwards"),BaseView.animateIn(j[1],"connect-symbol-scaleleft",.2,"ease-in",.5,"backwards"),BaseView.animateIn(j[2],"connect-symbol-scaleleft",.2,"ease-in",.6,"backwards"),BaseView.animateIn(j[0].getElementsByTagName("span")[0],"connect-symbol-slideup",.1,b,.6,"backwards"),BaseView.animateIn(j[1].getElementsByTagName("span")[0],"connect-symbol-slideup",.1,b,.7,"backwards"),BaseView.animateIn(j[2].getElementsByTagName("span")[0],"connect-symbol-slideup",.1,b,.8,"backwards"),BaseView.animateIn(d[0],"connect-city-slideup",.2,"ease-out",.7,"backwards"),BaseView.animateIn(d[1],"connect-city-slideup",.2,"ease-out",.8,"backwards"),BaseView.animateIn(d[2],"connect-city-slideup",.2,"ease-out",.9,"backwards");var k=new FJ.Notification(Tool.Actions.MSG_OPEN_SOFT_SUBNAVI);k.data=FJ.Application.model.data[a].subnavi,k.data&&FJ.Application.broadcast(k),n(),FJ.Capabilities.touch||setTimeout(e.draw,1100)},n=function(){},o=function(a){g.limitY(0,f.height()-window.innerHeight);var b=a.scrollY;f.translate(0,-1*b),e.translate(0,b*-.5)},p=function(b){var c=20;if("main"!=b){var d=document.getElementById(a+"-"+b).offsetTop-Tool.Actions.MENU_HEIGHT;g.scrollTo(0,d,c)}else g.scrollTo(0,0,c)}},DirectorItem=function(a,b){"use strict";var c,d,e,f,g,h,i,j;c=this,f=new FJ.VirtualScroll("director-item-scroll",.2),g=new FJ.View(b),h=new ImageSlideshow,g.add(h.media()),i=new DirectorInfoPanel(f),i.id(a+"-item"),g.add(i),j=new ViewState(a+"-item",720,-1,g,function(b){return b.head===a&&!b.isHeadOnly()}),FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:if(j.onNavigation(a.slug),j.isVisible()){var b=j.lastSlug.parts[1];b!=d?(d=b,m()):p()}else h.disable(),r();break;case Tool.Actions.MSG_RESIZE:j.onResize(),j.isVisible()?q():r();break;case Tool.Actions.MSG_ON_DATA_LOADED:j.isVisible()&&m();break;case Tool.Actions.MSG_ON_SOFT_SUBNAVI:j.isVisible()&&k(a.data)}};var k=function(b){var c=15;if("main"!=b){var d=window.innerHeight+document.getElementById(a+"-"+b).offsetTop-3*Tool.Actions.MENU_HEIGHT;f.scrollTo(0,d,c)}else f.scrollTo(0,0,c)},l=function(a){switch(a){case DirectorItem.CONTENT_READY:}};i.dispatcher.addEventListener(l);var m=function(){GlobalBackground.lockScroll(),GlobalBackground.setColor("#000000"),h.disable(),i.clear(),BaseView.requestData(d,d,Tool.Actions.DT_DIRECTOR_ITEM+"?s="+d)||(e=FJ.Application.model.data[d],h.loadGallery(e),n(),f.reset(),p(),i.build(e))},n=function(){var a=new FJ.Notification(Tool.Actions.MSG_OPEN_SOFT_SUBNAVI);a.data=e.subnavi,"directors/addl-tools"==a.data.navi[0].slug&&(a.data.navi[0].name="live-action >"),FJ.Application.broadcast(a)},o=function(a){var b=a.scrollY;i.onScroll(b),h.onScroll(b)},p=function(){f.dispatcher.addEventListener(o),h.enable()},q=function(){h.onResize()},r=function(){f.dispatcher.removeEventListener(o),h.disable()}},DirectorItem.CONTENT_READY="DirectorItem.CONTENT_READY",Directors=function(a,b){var c,d,e,f="cubic-bezier(1, 0, 1, .81)",g="cubic-bezier(0, 1, .46, 1)",h=new FJ.View(b);h.id(a);var i=new ViewState(a,Tool.Actions.VISIBILITY_THRESHOLD,-1,h,function(b){return b.head==a&&b.isHeadOnly()});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:i.onNavigation(a.slug),i.isVisible()&&j();break;case Tool.Actions.MSG_RESIZE:i.onResize();break;case Tool.Actions.MSG_ON_DATA_LOADED:i.isVisible()&&j()}};var j=function(){if(GlobalBackground.setDottedPattern(),h["class"](""),!BaseView.requestData(a,a,Tool.Actions.DT_DIRECTORS)){if(!c)return void BaseView.loadTemplate(Tool.Actions.TP_DIR,function(a){c=a,j()});i.m==i.IN_NEW&&k(),m()}},k=function(){c.execute(h.div,FJ.Application.model.data.directors),d=document.getElementById("directors-category-left"),e=document.getElementById("directors-category-right"),l(document.getElementById("directors-divider"),"directors-divider-in",1,f,0,"backwards",!0),l(document.getElementById("background-reveal-left"),"directors-reveal-left",.3,"ease-out",.4,"backwards",!0),l(document.getElementById("background-reveal-right"),"directors-reveal-right",.3,"ease-out",.5,"backwards",!0),l(d.getElementsByTagName("h1")[0],"directors-h1-left",.25,"ease-out",.4,"backwards"),l(d.getElementsByTagName("h1")[1],"directors-h1-left",.25,"ease-out",.5,"backwards"),l(d.getElementsByTagName("span")[1],"directors-span-left",.2,g,.6,"backwards"),l(e.getElementsByTagName("h1")[0],"directors-h1-right",.25,"ease-out",.5,"backwards"),l(e.getElementsByTagName("h1")[1],"directors-h1-right",.25,"ease-out",.6,"backwards"),l(e.getElementsByTagName("span")[1],"directors-span-right",.2,g,.7,"backwards")},l=function(a,b,c,d,e,f,g){var h=new FJ.ElementWrapper(a);h.setDisplay("");var i=function(){g&&h.setDisplay("none"),h.animation.reset()};h.animation.set(b,c,d,e,i,f)},m=function(){d.addEventListener("click",r,!1),e.addEventListener("click",s,!1),d.addEventListener("mouseover",n,!1),e.addEventListener("mouseover",o,!1),d.addEventListener("mouseout",p,!1),e.addEventListener("mouseout",q,!1)},n=function(a){h["class"]("category-left-hover")},o=function(a){h["class"]("category-right-hover")},p=function(a){h["class"]("")},q=function(a){h["class"]("")},r=function(b){var c=new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,a+"/live-action");FJ.Application.broadcast(c)},s=function(b){var c=new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,a+"/interactive");FJ.Application.broadcast(c)}},DirectorsList=function(a,b){var c,d=new FJ.View(b);d.id(a+"-list");var e,f,g,h,i,j="",k=new ViewState(a,720,-1,d,function(b){return b.head==a&&!b.isHeadOnly()}),l=new FJ.VirtualScroll("awards-scroll",.1);FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:k.onNavigation(a.slug);var b=k.lastSlug.parts[1]==j;j=k.lastSlug.parts[1],k.isVisible()&&(k.m==k.IN_NEW?o():b||(p(),r(),q(),t()));break;case Tool.Actions.MSG_RESIZE:k.onResize(),r(),k.isVisible()?m():n();break;case Tool.Actions.MSG_ON_DATA_LOADED:k.isVisible()&&o()}};var m=function(){r(),l.dispatcher.addEventListener(s)},n=function(){l.dispatcher.removeEventListener(s),e&&clearInterval(e)},o=function(){if(GlobalBackground.setDottedPattern(),GlobalBackground.lockScroll(),e=setInterval(function(){d.div.style.height="100px",setTimeout(function(){d.div.style.height="auto"},1)},1e3),!BaseView.requestData(a,a,Tool.Actions.DT_DIRECTORS)){if(!c)return void BaseView.loadTemplate(Tool.Actions.TP_DIR_LIST,function(a){c=a,o()});p(),m(),q(),BaseView.showSubnavi(a)}},p=function(){var a=FJ.Application.model.data.directors[j],b=a.directors.length/2|0;b=a.directors.length%2==0?b:b+1,d.removeAll(),c.execute(d.div,{category:a.category,left:a.directors.slice(0,b),right:a.directors.slice(b),single:a.directors}),"ARTISTS"===a.category?(d.div.querySelector(".artists-about").removeAttribute("hidden"),d.div.classList.add("artists")):d.div.classList.remove("artists");var e=document.getElementsByClassName("column-left")[0].getElementsByTagName("li"),k=document.getElementsByClassName("column-right")[0].getElementsByTagName("li"),l=document.getElementsByClassName("column-single")[0].getElementsByTagName("li");f=[],g=[];var m=function(a){f.push(a)};FJ.ArrayUtil.applyOn(e,m),FJ.ArrayUtil.applyOn(k,m),m=function(a){g.push(a)},FJ.ArrayUtil.applyOn(l,m),h=e.length,i=a.directors.length},q=function(){var a=window.innerWidth<920,b=a?g:f;FJ.ArrayUtil.applyOn(b,function(b,c){var d=new FJ.ElementWrapper(b.getElementsByTagName("div")[0]);d.animation.resetAfterAnimation=!0;var e=new FJ.ElementWrapper(b.getElementsByTagName("a")[0]);e.animation.resetAfterAnimation=!0;var g,h,i;a?(g=f.length/2,h=c%g,i=.1*(c/g|0)):(h=c,i=0),e.div.style.opacity=0,e.animation.set("director-name-slide-in",.15,"ease-out",.1+.05*h+i,null,"forwards")})},r=function(){},s=function(a){var b=a.scrollY;r(),d.translate(0,-1*b);var c=window.innerWidth<920?i:h,e=window.innerWidth<920?72:90;l.limitY(0,Math.max(0,c*e-window.innerHeight+2*Tool.Actions.MENU_HEIGHT))},t=function(){var a=new FJ.Notification(Tool.Actions.MSG_UPDATE_SUBNAVI);a.data=k.lastSlug.parts[1],FJ.Application.broadcast(a)}},Navi=function(a,b){var c=!1,d=!1,e=new FJ.View(b);e.id(a);var f=[],g=new ViewState(a,720,-1,e,function(a){return FJ.Capabilities.touch?a.parts.length<2||a.parts[2]!=Tool.Actions.V_VIDEO:!0});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:g.onNavigation(a.slug),g.isVisible()?h():k();break;case Tool.Actions.MSG_RESIZE:g.onResize(),j();break;case Tool.Actions.MSG_VIDEO_START:c=!0,m.start();break;case Tool.Actions.MSG_VIDEO_STOP:c=!1,m.cancel()}};var h=function(){var a=FJ.Capabilities.touch||!FJ.Capabilities.csstransforms3d;if(a?e.div.classList.add("simple"):e.div.classList.add("three-d"),!d){for(var b=FJ.Application.model.data.main.sections,h=0;h<b.length;h++){var k=new NaviButton(b[h],a);e.add(k),f.push(k)}d=!0}j(),i(g.lastSlug),c=!1,m.cancel()},i=function(a){for(var b=0;b<f.length;b++)f[b].setActive(a.parts[0])},j=function(){for(var a=0;a<f.length;a++){var b=window.innerWidth/f.length|0,c=a<f.length-1?b:window.innerWidth-b*(f.length-1),d=a*b+a;f[a].resizeTo(d,c)}},k=function(){FJ.Capabilities.touch||e.translate(0,-Tool.Actions.MENU_HEIGHT)},l=function(){FJ.Capabilities.touch||e.translate(0)},m=new AutoHide(l,k,2500)},WorkList=function(a,b){var c=new FJ.View(b);c.id(a);var d,e,f,g,h=!1,i=new FJ.View;i.id(),c.add(i);var j=function(a){n.scrollTo(a,a,10)},k=new Scrollbar("scrollbar",j);c.add(k);var l,m,n=new FJ.VirtualScroll("work-list-scroll",.1),o=!0,p=new ViewState(a,720,-1,c,function(b){var c=b.head==a&&(b.isHeadOnly()||b.parts[1]==Tool.Actions.V_TAG);return c});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:if(p.onNavigation(a.slug),k.disable(),p.isVisible()){var b=p.lastSlug.parts[2]||Tool.Actions.V_DEFAULT_TAG;b=decodeURIComponent(b),o=m!=b,m=b,t()}else n.dispatcher.removeEventListener(u);break;case Tool.Actions.MSG_RESIZE:p.onResize(),p.isVisible()&&B();break;case Tool.Actions.MSG_ON_DATA_LOADED:p.isVisible()&&t()}};var q,r=function(){return Tool.Actions.V_TAG+"-"+m},s=function(){var a=new FJ.Notification(Tool.Actions.MSG_OPEN_WORK_SUBNAVI);a.data=FJ.Application.model.data[r()].defaultTags,a.data&&FJ.Application.broadcast(a)},t=function(){GlobalBackground.setColor("#151515"),GlobalBackground.lockScroll(),o&&(v(),BaseView.requestData(r(),r(),Tool.Actions.DT_WORK+"?t="+encodeURI(m)))||(s(),o?x():z(),o=!1)},u=function(a){var b=FJ.Capabilities.touch?a.scrollX:a.scrollY;k.update(b);for(var c=0;c<l.length;c++)l[c].onScroll(b,h)},v=function(){i.removeAll(),l=[],window.removeEventListener("keydown",w)},w=function(a){switch(a.keyCode){case 37:n.scrollTo(0,n.event.targetScrollY-e,10);break;case 39:n.scrollTo(0,n.event.targetScrollY+e,10)}},x=function(a){v(),e=window.innerWidth<=Tool.Actions.NARROW_LAYOUT_THRESHOLD?300:400,d=FJ.Application.model.data[r()],g=Math.ceil(window.innerWidth/e)+1,f=Math.min(d.projects.length,g),n.reset(),n.dispatcher.addEventListener(u),n.setValue(1.5*window.innerWidth,1.5*window.innerWidth),n.scrollTo(0,0,40);for(var b=0;f>b;b++){var c=new WorkThumb(b,f,d.projects);c.setWidth(e),c.onScroll(0,0),c.registerClick(function(a){return function(b){"a"!=b.target.tagName.toLowerCase()&&(n.dispatcher.removeEventListener(u),FJ.ArrayUtil.apply(l,"animateOut"),setTimeout(l[a].onClick,500))}}(b)),i.add(c),l.push(c)}window.addEventListener("keydown",w);var j=function(){h=!0};if(!a)for(var b=0;f>b;b++)l[b].animateIn(b==f-1?j:null);if(h=!1,0==f){var k=new WorkNotFound(0,f,m);i.add(k);var o=new WorkRecommended(1,f,FJ.Application.model.data[r()].defaultTags);i.add(o)}a||y()},y=function(){var a=FJ.Capabilities.touch?WorkList.SCROLLBAR_HEIGHT_TOUCH:WorkList.SCROLLBAR_HEIGHT;if(k.setDimensions(window.innerWidth,a),k.div.style.top=window.innerHeight-a+"px",f==g){var b=d.projects.length*e-window.innerWidth;n.limitY(0,b),n.limitX(0,b),k.setTarget(b,window.innerWidth)}else n.limitY(0,0),n.limitX(0,0),k.disable();n.touch()},z=function(){e=window.innerWidth<=Tool.Actions.NARROW_LAYOUT_THRESHOLD?300:400;for(var a=0;a<l.length;a++)l[a].reset(),l[a].setWidth(e),l[a].animateIn();y(),n.dispatcher.addEventListener(u)},A=function(){x(!0)},B=function(){y(),clearInterval(q),q=setTimeout(A,200)}},WorkList.SCROLLBAR_HEIGHT=12,WorkList.SCROLLBAR_HEIGHT_TOUCH=2,WorkItem=function(a,b){var c,d,e,f=new FJ.VirtualScroll("work-item-scroll",.2),g=new FJ.View(b);g.id(a+"-item");var h=new VideoProxy;g.add(h.media());var i=new ImageProxy;g.add(i.media());var j=new WorkInfoPanel(f);g.add(j);var k=new ViewState(a,720,-1,g,function(b){var c=FJ.Capabilities.touch&&b.parts.length>=2&&b.parts[2]==Tool.Actions.V_VIDEO,d=b.head==a&&!b.isHeadOnly()&&b.parts[1]!=Tool.Actions.V_TAG;return d&&!c});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:k.onNavigation(a.slug),k.isVisible()?m():p();break;case Tool.Actions.MSG_RESIZE:k.onResize(),k.isVisible()?o():p();break;case Tool.Actions.MSG_ON_DATA_LOADED:k.isVisible()&&m();break;case Tool.Actions.MSG_WINDOW_FOCUS:h.play();break;case Tool.Actions.MSG_WINDOW_BLUR:h.pause()}};var l=function(a){switch(a){case WorkItem.CONTENT_READY:h.attachControls();break;case WorkItem.VIDEO_MANUALLY_PAUSED:j.autoHide.cancel();break;case WorkItem.VIDEO_MANUALLY_RESUMED:j.autoHide.start(),f.scrollTo(0,0,20);break;case WorkItem.VIDEO_ENDED:FJ.Application.broadcast(new FJ.Notification(Tool.Actions.MSG_VIDEO_STOP)),h.disable(),i.loadSplash(d);break;case WorkItem.VIDEO_REPLAY:i.disable(),h.playSplash(d);break;case WorkItem.ON_CASE_STUDY:i.disable(),h.playCaseStudy(d);break;case WorkItem.ON_TOUCH_VIDEO:e.play()}};j.dispatcher.addEventListener(l),h.dispatcher.addEventListener(l);var m=function(){if(GlobalBackground.setColor("#000000"),GlobalBackground.lockScroll(),c=k.lastSlug.parts[1],i.disable(),h.disable(),j.clear(),!BaseView.requestData(c,c,Tool.Actions.DT_PROJECT+"?s="+c)){d=FJ.Application.model.data[c],j.build(d);var a=k.lastSlug.parts[2]==Tool.Actions.V_CASESTUDY;a&&(i.disable(),a=h.playCaseStudy(d),a&&FJ.Application.broadcast(new FJ.Notification(Tool.Actions.MSG_VIDEO_START))),a||(i.disable(),a=h.playSplash(d),a&&FJ.Application.broadcast(new FJ.Notification(Tool.Actions.MSG_VIDEO_START))),a||(h.disable(),h.disableControls(),i.loadSplash(d)),FJ.Capabilities.touch&&(!d.splashVideo||""==d.splashVideo||FJ.Capabilities.touch)&&(e=new TouchVideo(getVideoUrl(d.splashVideo),g.div)),n()}},n=function(){f.dispatcher.addEventListener(q),h.activate()},o=function(){h.onResize()},p=function(){f.dispatcher.removeEventListener(q),h.deactivate()},q=function(a){var b=a.scrollY;j.onScroll(b,h.isPlaying()),h.onScroll(b),i.onScroll(b)}},WorkItem.CONTENT_READY="WorkItem.CONTENT_READY",WorkItem.VIDEO_MANUALLY_PAUSED="WorkItem.VIDEO_MANUALLY_PAUSED",WorkItem.VIDEO_MANUALLY_RESUMED="WorkItem.VIDEO_MANUALLY_RESUMED",WorkItem.VIDEO_REPLAY="WorkItem.VIDEO_REPLAY",WorkItem.VIDEO_ENDED="WorkItem.VIDEO_ENDED",WorkItem.HEADER_SHOW="WorkItem.HEADER_SHOW",WorkItem.HEADER_HIDE="WorkItem.HEADER_HIDE",WorkItem.ON_CASE_STUDY="WorkItem.ON_CASE_STUDY",WorkItem.ON_TOUCH_VIDEO="WorkItem.ON_TOUCH_VIDEO",DirectorReel=function(a,b){var c=new FJ.View(b);c.id(a+"-reel");var d=new BackgroundMedia;d.scaleMode=BackgroundMedia.FILL,d.dispatcher.addEventListener(function(){h==g.length-1?k():l()}),c.add(d);var e=new ExtendedVideoControls;c.add(e),e.onMute=d.mute,e.onUnmute=d.unMute,e.onPlay=function(){e.setPlayState(!0),d.resume()},e.onPause=function(){e.setPlayState(!1),d.pause()};var f,g,h=0,i=new ViewState(a,Tool.Actions.VISIBILITY_THRESHOLD,-1,c,function(b){return b.head==a&&!b.isHeadOnly()});FJ.Application.createMediator().update=function(a){switch(a.message){case FJ.MSG_NAVIGATE:i.onNavigation(a.slug),i.isVisible()?j():(d.clear(),e.deactivate());break;case Tool.Actions.MSG_RESIZE:i.onResize(),i.isVisible()?d.activate():d.deactivate();break;case Tool.Actions.MSG_ON_DATA_LOADED:i.isVisible()&&j()}};var j=function(){GlobalBackground.setColor("#000"),GlobalBackground.lockScroll(),f=i.lastSlug.parts[1],BaseView.requestData(f,f,Tool.Actions.DT_DIRECTOR_ITEM+"?s="+f)||(g=FJ.Application.model.data[f].reel,e.setPlayState(!0),e.setMuteState(!1),e.activate(),h=-1,l())},k=function(){console.log("backToDirectorsPage");var a="director/"+f,b=new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,a);FJ.Application.broadcast(b)},l=function(){h++,h>=g.length&&(h=0),e.updateCounter(h+1,g.length);var a=getVideoUrl(g[h].video);d.load(a)},m=function(){h--,0>=h&&(h=g.length-1),e.updateCounter(h+1,g.length);var a=getVideoUrl(g[h].video);d.load(a)};e.onNext=l,e.onPrev=m},SmallWindow=function(a,b){var c=new FJ.View(b);c["class"]("small-window"),c.div.innerHTML="<p>Please resize your browser.</p>";var d=new ViewState("small-window",-1,Tool.Actions.VISIBILITY_THRESHOLD,c,function(a){return!0});d.onNavigation(a),FJ.Application.createMediator().update=function(a){switch(a.message){case Tool.Actions.MSG_RESIZE:d.onResize()}}},Scrollbar=function(a,b){function c(a){n=a.pageX-o,l=!0}function d(a){if(l){var c=FJ.MathUtil.clamp(0,m,a.pageX-n);b&&b(c/m*i)}}function e(){l=!1}var f=this;FJ.View.call(this);var g,h,i,j,k=new FJ.View;this.add(k),this["class"](a);var l,m,n,o=0;k.div.addEventListener("mousedown",c),document.addEventListener("mousemove",d),document.addEventListener("mouseup",e),this.setDimensions=function(a,b){g=-1==a?window.innerWidth:a,f.div.style.width=g+"px",f.div.style.height=b+"px"},this.setTarget=function(a,b){i=a,h=-1==h?window.innerWidth:b,j=h/i*g,k.div.style.width=j+"px",k.setDisplay("block"),k.translate(0),m=g-j},this.update=function(a){o=a/i,o*=m,k.translate(o)},this.disable=function(){k.setDisplay("none")}},Scrollbar.prototype=new FJ.View,Scrollbar.prototype.constructor=FJ.View,AutoHide=function(a,b,c){c=c||1e3;var d,e=!1,f=function(){clearInterval(d),a(),d=setInterval(b,c)};this.cancel=function(){e&&(document.removeEventListener("mousemove",f),clearInterval(d),a(),e=!1)},this.start=function(a){e||FJ.Capabilities.touch||(a=a||0,document.addEventListener("mousemove",f),d=setInterval(b,c+a),e=!0)}},BackgroundMedia=function(a){var b=this;FJ.View.call(this),this["class"]("splash");var c,d,e,f,g,h,i,j,k=!1,l=!1,m=!1,n=!1,o=!1;this.scaleMode,this.forceVideoFillMode=!1,this.includeMenu=!1,this.disableNavi=!0,a&&(g=document.createElement("div"),g.style.position="absolute",g.style.width="100%",g.style.height="100%",g.setAttribute("class",a),this.div.appendChild(g)),this.dispatcher=new FJ.EventDispatcher,this.setOverlayOpacity=function(b){a&&(g.style.opacity=b)},this.load=function(c,d,o,q){if(c&&"null"!=c){b.clear(),o&&(console.log("manualShow is used!"),console.trace()),k=!1,j=c,e=d,l=o,f=q;var r=c.substring(c.lastIndexOf(".")+1).toLowerCase();switch(r){case"jpg":case"png":case"gif":h=document.createElement("img"),h.onload=p,i=new FJ.ElementWrapper(h).animation,h.src=c,b.scaleMode=BackgroundMedia.FILL;break;case"mp4":case"webm":case"ogv":m=!0,n=!0,h=document.createElement("video"),h.setAttribute("type","video/"+r),q?(h.poster=q,h.style.width="100%",h.style.height="100%"):(h.style.opacity=0,h.autoplay=!0),h.addEventListener("canplaythrough",p),h.addEventListener("timeupdate",s),h.addEventListener("ended",t),i=new FJ.ElementWrapper(h).animation,h.src=c,b.scaleMode=b.forceVideoFillMode?BackgroundMedia.FILL:BackgroundMedia.LETTERBOX,a?b.div.insertBefore(h,g):b.div.appendChild(h)}FJ.Application.broadcast(new FJ.Notification(Tool.Actions.MSG_VIDEO_BUFFER_START));
}};var p=function(){h&&(c=m?h.videoWidth:h.width,d=m?h.videoHeight:h.height,k=!0,m||(a?b.div.insertBefore(h,g):b.div.appendChild(h)),l||b.fadeIn(),e&&e(),FJ.Application.broadcast(new FJ.Notification(Tool.Actions.MSG_VIDEO_BUFFER_STOP)))},q=Date.now(),r=new FJ.Notification(BackgroundMedia.ON_TIME_UPDATE),s=function(){Date.now()-q>500&&126.1!=h.duration&&(r.vars={currentTime:h.currentTime,duration:h.duration},FJ.Application.broadcast(r),q=Date.now())};FJ.Application.createMediator().update=function(a){h&&a.message==VideoControls.ON_SCRUB&&h.duration&&(h.currentTime=a.vars.position*h.duration)};var t=function(){b.dispatcher.dispatch(BackgroundMedia.ON_VIDEO_ENDED)};this.resize=function(){if(k&&h){var a=b.includeMenu?Tool.Actions.MENU_HEIGHT:0,e=window.innerWidth/c,f=(window.innerHeight-a)/d;if(e>=f&&b.scaleMode==BackgroundMedia.FILL||f>e&&b.scaleMode==BackgroundMedia.LETTERBOX){h.width=window.innerWidth,h.height=d*e,h.style.marginLeft=0;var g=(h.height-window.innerHeight)*-.5+.5*a;h.style.marginTop=g+"px"}else h.height=window.innerHeight,h.width=c*f,h.style.marginTop=.5*a+"px",h.style.marginLeft=(h.width-window.innerWidth)*-.5+"px"}},this.checkPaused=function(){return n},this.pause=function(){if(m&&!n){h.pause(),n=!0;var a=new FJ.Notification(Tool.Actions.MSG_VIDEO_STOP);b.disableNavi&&FJ.Application.broadcast(a)}},this.resume=function(){if(m&&n){h.play(),n=!1;var a=new FJ.Notification(Tool.Actions.MSG_VIDEO_START);b.disableNavi&&FJ.Application.broadcast(a)}},this.replay=function(){h.currentTime=0,h.play(),n=!1;var a=new FJ.Notification(Tool.Actions.MSG_VIDEO_START);b.disableNavi&&FJ.Application.broadcast(a)},this.deactivate=function(){k&&(b.pause(),h.style.opacity=0)},this.activate=function(){k&&(b.resize(),h.style.opacity=1,b.resume())},this.fadeIn=function(){b.activate(),h.style.opacity=1,i.set("fade-in",.6,"ease-out",0,function(){i.reset()},"backwards")},this.clear=function(){if(o=!1,b.endedCallback=null,b.loopCount=0,b.pause(),m=!1,h){try{b.div.removeChild(h),h.src=null,h=null}catch(a){}h=null}FJ.Application.broadcast(new FJ.Notification(Tool.Actions.MSG_VIDEO_BUFFER_STOP))},this.mute=function(){m&&(h.volume=0)},this.unMute=function(){m&&(h.volume=1)},this.loop=function(a){o=a},this.hide()},BackgroundMedia.prototype=new FJ.View,BackgroundMedia.prototype.constructor=FJ.View,BackgroundMedia.ON_VIDEO_ENDED="BackgroundMedia.ON_VIDEO_ENDED",BackgroundMedia.ON_TIME_UPDATE="BackgroundMedia.ON_TIME_UPDATE",BackgroundMedia.FILL=1,BackgroundMedia.LETTERBOX=2,NaviButton=function(a,b){if(FJ.View.call(this),this.div.setAttribute("class","button-base"),this.div.setAttribute("slug",a.id.split("/")[0]),!b){var c=document.createElement("div");c.innerHTML="<h1>"+a.title+'</h1><span class="block"></span>',this.div.appendChild(c)}var d=document.createElement("div");d.innerHTML="<h1>"+a.title+'</h1><span class="block"></span><span class="bottom-border"></span>',this.div.appendChild(d);var e=function(b){a.url?window.open(a.url,a.target):FJ.Application.broadcast(new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,a.id))};this.div.tabIndex=0,this.div.setAttribute("role","button"),this.div.addEventListener("click",e,!1),this.setActive=function(a){var b=this.div.getAttribute("slug"),c="directors"==b&&("director"==a||"reel"==a);b==a||c?this.div.setAttribute("class","button-base menu-current"):this.div.setAttribute("class","button-base")},this.resizeTo=function(a,b){this.div.style.width=b+"px",this.div.style.left=a+"px"}},NaviButton.prototype=new FJ.View,NaviButton.prototype.constructor=FJ.View,AwardsHeader=function(a){for(var b=new FJ.ElementWrapper(document.getElementById("awards-header-letter-1")),c=new FJ.ElementWrapper(document.getElementById("awards-header-letter-2")),d=new FJ.ElementWrapper(document.getElementById("awards-header-letter-3")),e=new FJ.ElementWrapper(document.getElementById("awards-header-text-1")),f=new FJ.ElementWrapper(document.getElementById("awards-header-text-2")),g=new FJ.ElementWrapper(document.getElementsByClassName("awards-list")[0]),h=document.getElementById("awards-featured").getElementsByTagName("li"),i=[],j=0;j<h.length;j++)if(h[j]instanceof Element){var k=new FJ.ElementWrapper(h[j]);k.animation.resetAfterAnimation=!0,i.push(k)}b.animation.resetAfterAnimation=!0,c.animation.resetAfterAnimation=!0,d.animation.resetAfterAnimation=!0,e.animation.resetAfterAnimation=!0,f.animation.resetAfterAnimation=!0,g.animation.resetAfterAnimation=!0,a=parseInt(a).pad(3);var l=Number(String(a).charAt(0)),m=Number(String(a).charAt(1)),n=Number(String(a).charAt(2)),o=function(a,b,c,d){a.opacity(0);var e=FJ.Capabilities.isMobile?2:4,f=0,g=function(){if(e>f){var b=.07*d,c=FJ.Capabilities.isMobile?"award-out-number-mobile":"award-out-number";a.animation.set(c,b,"linear",0,h)}},h=function(){f++;var h=f==e?.3*d:.07*d,i=f==e?"cubic-bezier(0, 0, .17, 1)":"linear",j=f==e?FJ.Capabilities.isMobile?"award-in-deblur-number-mobile":"award-in-deblur-number":FJ.Capabilities.isMobile?"award-in-number-mobile":"award-in-number",k=1==f?c:0;a.opacity(1),a.div.innerHTML=b,a.animation.set(j,h,i,k,g,"backwards")};h()};this.animate=function(){FJ.DisplayUtil.addClass(g.div,"awards-list-part-hidden"),g.animation.set("award-list-slide-in",.2,"ease-out"),e.animation.set("award-slide-in-text",.4,"ease-out",.4,null,"backwards"),f.animation.set("award-slide-in-text",.4,"ease-out",.5,null,"backwards"),o(b,l,.9,1),o(c,m,.75,1.1),o(d,n,.5,.9);for(var a=0;a<i.length;a++){var h=i[a];h.animation.set("award-feature-slide-in",.2,"ease-out",0,null,"backwards")}setTimeout(function(){FJ.DisplayUtil.removeClass(g.div,"awards-list-part-hidden")},1600)}},WorldNodeGarden=function(){var a,b,c,d,e,f,g,h=this,i="assets/imgs/connect/world.gif";FJ.View.call(this);var j=3e3,k=[],l=25,m=0;e=window.innerWidth,f=Math.max(window.innerHeight,9*e/16),g=Math.random;var n=function(){if(0==k.length){var a=document.createElement("canvas");a.width=c.width,a.height=c.height;var b=a.getContext("2d");b.drawImage(c,0,0),d=b.getImageData(0,0,c.width,c.height);for(var h=j;h>0;){var i=g(),n=g(),p=new SQR.V2(i,n);SQR.CanvasUtil.getPixelNormRed(d,p.x,p.y)<128&&(p.x*=e,p.y*=f,k.push({index:k.length,point:p,connections:[],m:-1,connectionState:0}),h--)}for(var q=0;j>q;q++)for(var r=q+1;j>r;r++){var s=k[q].point,t=k[r].point,u=(new SQR.V2).sub(s,t).mag();l>u&&u>m&&k[q].connections.push([r,s,t,0])}}o()};this.draw=function(){c=new Image,c.onload=n,c.src=i},this.clear=function(){b&&b.clearRect(0,0,e,f)};var o=function(){a=document.createElement("canvas"),a.width=e,a.height=f,a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.opacity="0.3",h.div.appendChild(a),b=a.getContext("2d"),b.strokeStyle="rgba(0, 0, 0, 0.01)",b.fillStyle="rgba(0, 0, 0, 0.1)";for(var c=0;c<k.length;c++){p(k[c]);for(var d=0;d<k[c].connections.length;d++)q(k[c].connections[d])}},p=function(a){b.beginPath(),b.arc(a.point.x,a.point.y,1,0,SQR.twoPI),b.fill(),a.m=1},q=function(a){b.moveTo(a[1].x,a[1].y),b.lineTo(a[2].x,a[2].y),b.stroke()}},WorldNodeGarden.prototype=new FJ.View,WorldNodeGarden.prototype.constructor=FJ.View;var VideoControls=function(){function a(a){a.stopPropagation(),q.addEventListener("mousemove",b),q.addEventListener("mouseleave",c),b(a)}function b(a){var b=void 0!=a.offsetX?a.offsetX:a.layerX;v.vars={position:b/q.offsetWidth},FJ.Application.broadcast(v),e.setPlayState("playing")}function c(a){b(a),q.removeEventListener("mousemove",b),q.removeEventListener("mouseleave",c)}function d(a){return(""+a).length<2?"0"+a:a}var e=this,f=0;VideoControls.count;VideoControls.count++,FJ.View.call(this),this["class"]("video-controls");var g=new FJ.ElementWrapper(document.createElement("div")),h=new FJ.ElementWrapper(document.createElement("div")),i=new FJ.ElementWrapper(document.createElement("div")),j=new FJ.ElementWrapper(document.createElement("div"));g["class"]("play"),h["class"]("pause"),i["class"]("mute"),j["class"]("unmute"),this.div.addEventListener("mouseover",function(a){e.isPlaying&&e.autoHide.cancel()}),this.div.addEventListener("mouseout",function(a){e.isPlaying&&e.autoHide.start()});var k=function(){i.setDisplay("none"),j.setDisplay("block"),e.onMute&&e.onMute()},l=function(){i.setDisplay("block"),j.setDisplay("none"),e.onUnmute&&e.onUnmute()},m=function(a){var b=(new Date).getTime();100>b-f||(e.isPlaying?p():o())},n=function(a){a.stopPropagation()},o=function(){e.autoHide.start(),e.onPlay&&e.onPlay()},p=function(){e.autoHide.cancel(),e.onPause&&e.onPause()},q=document.createElement("div");q.className="scrubber";var r=document.createElement("div");r.className="progress",q.appendChild(r);var s=document.createElement("div");s.className="time",s.innerHTML="0:00 / 0:00",q.appendChild(s);var t=FJ.Application.createMediator(),u=function(a){if(a.message==BackgroundMedia.ON_TIME_UPDATE){var b=Math.floor(a.vars.currentTime/60),c=Math.round(a.vars.currentTime%60),e=Math.round(a.vars.duration%60),f=Math.floor(a.vars.duration/60);60==c?c="00":null,60==e?e="00":null,s.innerHTML=b+":"+d(c),isNaN(a.vars.duration)||(s.innerHTML+=" / "+f+":"+d(e)),r.style.width=a.vars.currentTime/a.vars.duration*100+"%"}};t.update=u;var v=new FJ.Notification(VideoControls.ON_SCRUB);q.addEventListener("mousedown",a),q.addEventListener("mouseup",c),this.div.appendChild(q),this.add(g),this.add(h),g.registerClick(o),h.registerClick(p),FJ.Capabilities.touch||(this.add(i),this.add(j),i.registerClick(k),j.registerClick(l)),this.onMute=null,this.onUnmute=null,this.onPlay=null,this.onPause=null,this.isPlaying=!1,this.setPlayState=function(a){g.setDisplay(a?"none":"block"),h.setDisplay(a?"block":"none"),e.isPlaying=a},this.setMuteState=function(a){i.setDisplay(a?"none":"block"),j.setDisplay(a?"block":"none")};var w=function(){e.opacity(1)},x=function(){e.opacity(0)};this.activate=function(){f=(new Date).getTime(),document.body.addEventListener("click",m),this.div.addEventListener("click",n),t.update=u},this.deactivate=function(){document.body.removeEventListener("click",m),this.div.removeEventListener("click",n),t.update=void 0},this.autoHide=new AutoHide(w,x,2500),this.autoHide.start()};VideoControls.count=0,VideoControls.prototype=new FJ.View,VideoControls.prototype.constructor=FJ.View,VideoControls.ON_SCRUB="VideoControls.ON_SCRUB",WorkInfoPanel=function(a){var b,c,d,e,f,g,h,i,j,k=this;FJ.View.call(this),this.id("content"),this.dispatcher=new FJ.EventDispatcher;var l;this.build=function(a){c=a,o()};var m=function(){k.dispatcher.dispatch(WorkItem.HEADER_SHOW),d.opacity(1)},n=function(){k.dispatcher.dispatch(WorkItem.HEADER_HIDE),d.opacity(0)};this.autoHide=new AutoHide(m,n,2500);var o=function(){if(!b)return void BaseView.loadTemplate(Tool.Actions.TP_WORK_ITEM,function(a){b=a,o()});for(var a=c.directors.length,m={},n="",s=0;a>s;s++)for(var t=c.directors[s].role.split(","),u=c.directors[s].name,v=c.directors[s].slug,w=0;w<t.length;w++){var x=t[w].trim().toLowerCase();m[x]||(m[x]=[]),m[x].push([u,v])}for(var x in m){var y=m[x];y.sort();var w=0;for(n+="<li>";w<y.length;w++){var u=y[w][0],v=y[w][1];-1==u.toLowerCase().indexOf("tool")&&(u='<a href="'+v+'">'+u+"</a>"),n+=u,w<y.length-1&&(n+=", ")}w>1&&(x+="s"),n+="<small>"+x+"</small></li>"}c.dirlist=n,b.execute(k.div,c),l=c.description||c.awards&&c.awards.length>0||c.press&&c.press.length>0,d=new FJ.ElementWrapper(document.getElementById("work-item-head")),k.autoHide.start(),e=new FJ.ElementWrapper(document.getElementById("viewMoreLink")),f=new FJ.ElementWrapper(document.getElementById("viewLessLink"));var z=new FJ.ElementWrapper(document.getElementById("viewMoreBlock"));g=new FJ.ElementWrapper(document.getElementById("work-item-view-project"));var A=new FJ.ElementWrapper(document.getElementById("work-item-video"));FJ.Capabilities.touch?A.registerClick(function(){k.dispatcher.dispatch(WorkItem.ON_TOUCH_VIDEO)}):A.setDisplay("none"),h=new FJ.ElementWrapper(document.getElementById("work-item-case-study-video")),h.registerClick(r),i=new FJ.ElementWrapper(document.getElementById("belowTheFold")),j=Array.prototype.slice.call(k.div.getElementsByClassName("animatable")),FJ.ArrayUtil.applyOn(j,function(a){return new FJ.ElementWrapper(a)}),l?(f.setDisplay("none"),e.registerClick(p),f.registerClick(q)):z.setDisplay("none"),k.dispatcher.dispatch(WorkItem.CONTENT_READY)},p=function(){a.scrollTo(0,window.innerHeight,20)},q=function(){a.scrollTo(0,0,20)};this.clear=function(){k.div.innerHTML=""};var r=function(){k.dispatcher.dispatch(WorkItem.ON_CASE_STUDY)};this.onScroll=function(c,d){if(b){var g=i&&l?i.height():0;a.limitY(0,g),k.translate(0,-1*c),d?c>10?k.autoHide.cancel():k.autoHide.start():k.autoHide.cancel(),e&&(25>c?(e.setDisplay("block"),f.setDisplay("none")):(e.setDisplay("none"),f.setDisplay("block")));for(var h=j.length,m=i.height(),n=0;h>n;n++){var o=m-FJ.MathUtil.clamp(0,m,c);o/=m,o=FJ.MathUtil.easeQuadInOut(0,1,o),o=o*(n+1)*100,j[n].translate(0,o)}}}},WorkInfoPanel.prototype=new FJ.View,WorkInfoPanel.prototype.constructor=FJ.View,VideoProxy=function(){var a,b=this,c=new BackgroundMedia("splash-gradient-trans-black-css"),d=new VideoControls,e=!1,f=!1;this.dispatcher=new FJ.EventDispatcher,this.media=function(){return c},this.playSplash=function(a){return!a.splashVideo||""==a.splashVideo||FJ.Capabilities.touch?!1:g(getVideoUrl(a.splashVideo))},this.playCaseStudy=function(a){return a.casestudy?g(getVideoUrl(a.casestudy.video)):!1};var g=function(e,g){return console.log("VideoProxy.play",e,g),f&&b.disable(),c.load(e,null,!1,g),c.setDisplay("block"),d.setDisplay("block"),d.setPlayState(!0),d.autoHide.start(),a=.4,c.dispatcher.addEventListener(function(a){b.dispatcher.dispatch(WorkItem.VIDEO_ENDED)}),f=!0,b.onScroll(0),!0};this.attachControls=function(){d=new VideoControls;var a=document.getElementById("work-item-video-controls");a.appendChild(d.div),d.setPlayState(!0),d.setMuteState(!1),d.onMute=c.mute,d.onUnmute=c.unMute,d.onPlay=h,d.onPause=i},this.onScroll=function(b){if(f){(FJ.MathUtil.clamp(20,100,b)-20)/80;c.translate(0,b*-.5),c.setOverlayOpacity(0),e||(d.isPlaying&&b>10?(d.autoHide.cancel(),d.setPlayState(!1),c.pause(),a=.8):!d.isPlaying&&10>=b&&(d.autoHide.start(),d.setPlayState(!0),c.resume(),a=.4))}},this.isPlaying=function(){return f&&d.isPlaying},this.onResize=function(){c.resize()},this.disable=function(){c.clear(),c.setDisplay("none"),d.setPlayState(!1),d.autoHide.cancel(),f=!1},this.disableControls=function(){d.setDisplay("none")},this.play=function(){f&&h()},this.pause=function(){f&&i()};var h=function(){f?(e=!1,b.dispatcher.dispatch(WorkItem.VIDEO_MANUALLY_RESUMED)):b.dispatcher.dispatch(WorkItem.VIDEO_REPLAY)},i=function(){e=!0,c.pause(),d.setPlayState(!1),d.autoHide.cancel(),b.dispatcher.dispatch(WorkItem.VIDEO_MANUALLY_PAUSED),a=.8};this.setMinOpacity=function(b){a=b},this.activate=function(){d.activate()},this.deactivate=function(){d.deactivate(),c.clear()}},ImageProxy=function(){var a=new BackgroundMedia("splash-gradient-trans-black-css"),b=.8,c=!1;this.dispatcher=new FJ.EventDispatcher,this.media=function(){return a},this.loadSplash=function(b){return b.splashImage&&""!=b.splashImage?(a.load(b.splashImage),a.setDisplay("block"),c=!0,!0):!1},this.onScroll=function(d){if(c){a.translate(0,d*-.5);var e=(FJ.MathUtil.clamp(20,100,d)-20)/80;a.setOverlayOpacity(b+e*(1-b))}},this.onResize=function(){a.resize()},this.disable=function(){a.setDisplay("none"),c=!1}},WorkThumb=function(a,b,c){var d,e=.5,f=this,g=!0,h=0;FJ.View.call(this);var i,j,k,l,m=a;this["class"](FJ.Capabilities.touch?"thumb touch":"thumb mouse"),i=new FJ.ElementWrapper,FJ.CSSTransformBehavior(i.div,i),i.div.style.backgroundSize=WorkThumb.BACKGROUND_SIZE,this.add(i),j=new FJ.View,this.add(j),i.opacity(e),j.opacity(1),this.setWidth=function(a){d=a,i.div.style.width=d+"px",i.div.style.height="100%"},this.reset=function(){i.animation.reset(),j.animation.reset(),f.onResize()},this.onClick=function(){var a=new FJ.Notification(FJ.MSG_NAVIGATE,FJ.NOTIF_NAVIGATION,k.slug.substring(2));FJ.Application.broadcast(a)};var n=function(){k=c[m],i.div.style.backgroundColor=m%2==0?"#222":"#333";var a=FJ.Capabilities.touch?"data/image-proxy.php?p="+k.thumbLarge:k.thumbLarge;i.div.style.backgroundImage="url("+a+")",l=document.createElement("div"),k.client&&k.client.length>0?l.innerHTML+="<h2>"+k.client[0].name+"</h2>":l.innerHTML+="<span class='no-agency'></span>",l.innerHTML+="<h1>"+k.name+"</h1>";var b="";if(k.directors){for(var d=k.directors.length,e={},b="",g=0;d>g;g++)for(var h=k.directors[g].role.split(","),n=k.directors[g].name,o=k.directors[g].slug,p=0;p<h.length;p++){var q=h[p].trim().toLowerCase();e[q]||(e[q]=[]),e[q].push([n,o])}for(var q in e){var r=e[q];r.sort();for(var p=0;p<r.length;p++){var n=r[p][0],o=r[p][1];-1==n.toLowerCase().indexOf("tool")&&(n='<a href="'+o+'">'+n+"</a>"),b+="<h3>"+n+"</h3>"}p>1&&(q+="s"),b+="<h4>"+q+"</h4>"}}l.innerHTML+=b,j.div.innerHTML="",j.div.appendChild(l),f.onResize()};this.onScroll=function(e,g){for(var k=i,l=j,o=-e+a*d,p=0;o>window.innerWidth;)o-=b*d,p-=b;for(;-d>o;)o+=b*d,p+=b;if(p+a!=m&&p+a>=0&&p+a<c.length){var q=m>p+a;m=p+a,n(),h=q?-80:80}FJ.Capabilities.csstransforms3d?(f.transform.translate(o,0,0),g&&(k.transform.rotate3D(0,h,0),l.transform.rotate3D(0,h,0))):f.translate(o,0,0),o>d*-.75&&o<window.innerWidth-.25*d&&(h*=g?.92:0)};var o=function(){o=!1};this.animateIn=function(a){i.animation.set("work-thumb-image-in",.6,"ease",.3,o,"backwards"),j.animation.set("work-thumb-label-in",.5,"ease",.4,a,"backwards"),g=!0},this.animateOut=function(a){i.animation.set("work-thumb-image-out",.4,"ease",0,a,"forwards"),j.animation.set("work-thumb-label-out",.3,"ease",0,a,"forwards")},this.onResize=function(){var a=FJ.Capabilities.touch?WorkList.SCROLLBAR_HEIGHT_TOUCH:WorkList.SCROLLBAR_HEIGHT;this.div.style.height=window.innerHeight-2*Tool.Actions.MENU_HEIGHT-a+"px",i.div.style.backgroundSize=WorkItem.BACKGROUND_SIZE,l.style.marginTop=window.innerHeight-400+"px"},n()},WorkThumb.prototype=new FJ.View,WorkThumb.prototype.constructor=FJ.View,WorkItem.BACKGROUND_SIZE="cover",WorkNotFound=function(a,b,c){var d=this;c.length>20&&(c=c.substring(0,20)+"...");var e=window.innerWidth<=Tool.Actions.NARROW_LAYOUT_THRESHOLD?300:400;FJ.View.call(this),this.div.style.height=window.innerHeight-2*Tool.Actions.MENU_HEIGHT-10+"px",this.div.style.width=.5*window.innerWidth+"px",this["class"]("not-found");var f=new FJ.ElementWrapper;this.add(f),f.div.style.marginTop=window.innerHeight-500+"px",f.div.style.marginTop=window.innerHeight-500+"px",f.div.innerHTML="<h4>NO RESULTS FOUND FOR</h4><h1>"+c+"</h1><h6>We are sorry, but we couldn't find anything that matches <em>"+c+"</em> in our projects.</h6>",this.onScroll=function(b,c){var f=-b+a*e;d.transform.translate(f,0,0)},this.animateIn=function(a){a()}},WorkNotFound.prototype=new FJ.View,WorkNotFound.prototype.constructor=FJ.View,WorkRecommended=function(a,b,c){var d=this,e=window.innerWidth<=Tool.Actions.NARROW_LAYOUT_THRESHOLD?300:400;FJ.View.call(this),this.div.style.height=window.innerHeight-2*Tool.Actions.MENU_HEIGHT-10+"px",this.div.style.width=.5*window.innerWidth+"px",this.div.style.left=.5*window.innerWidth+"px",this["class"]("recommended");var f=new FJ.ElementWrapper;this.add(f),f.div.style.marginTop=window.innerHeight-500+"px";for(var g="<h4>Be sure to check our projects in featured categories:</h4><ul>",h=0;h<c.length;h++){var i=c[h];g+="<li>&gt; <a href='#/work/tag/"+i+"'>"+i+"</a></li>"}g+="</ul>",f.div.innerHTML=g,this.onScroll=function(b,c){var f=-b+a*e;d.transform.translate(f,0,0)},this.animateIn=function(a){a()}},WorkNotFound.prototype=new FJ.View,WorkNotFound.prototype.constructor=FJ.View,DirectorInfoPanel=function(a){var b,c,d,e,f,g=this;FJ.View.call(this),this.dispatcher=new FJ.EventDispatcher,this.build=function(a){c=a,c.awards&&i(c.awards),h()};var h=function(){return b?(b.execute(g.div,c),d=new FJ.ElementWrapper(document.getElementById("belowTheFold")),e=new FJ.ElementWrapper(document.getElementById("director-item-view-reel")),e.setDisplay(!c.reel||0==c.reel.length||FJ.Capabilities.touch?"none":"block"),f=new FJ.ElementWrapper(g.div.getElementsByClassName("head")[0]),g.onScroll(0),void g.dispatcher.dispatch(DirectorItem.CONTENT_READY)):void BaseView.loadTemplate(Tool.Actions.TP_DIR_ITEM,function(a){b=a,h()})},i=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.direction instanceof Array){for(var d=c.direction.length,e={},f="",g=0;d>g;g++)for(var h=c.direction[g].role.split(","),i=c.direction[g].name,j=c.direction[g].slug,k=0;k<h.length;k++){var l=h[k].trim().toLowerCase();e[l]||(e[l]=[]),e[l].push(i+"/"+j)}for(var l in e){var m=e[l];m.sort();for(var k=0;k<m.length;k++){var i=m[k].split("/")[0],j=m[k].split("/")[0];i.toLowerCase().indexOf("tool")>-1&&(i='<a href="'+j+'">'+i+"</a>"),f+="<h6>"+i+"</h6>",k<m.length-1&&(f+=", ")}k>1&&(l+="s"),f+="<h5>"+l+"</h5>"}c.direction=f}if(c.awards instanceof Array){for(var h="",g=0;g<c.awards.length;g++)h+="<div><span class='icon white icon-"+c.awards[g][0].toLowerCase()+"'></span><h4>"+c.awards[g][1]+"</h4></div>";c.awards=h}c.index=b}};this.onScroll=function(b){var c=d?d.height():0;a.limitY(0,c),g.translate(0,-1*b)},this.clear=function(){g.div.innerHTML=""}},DirectorInfoPanel.prototype=new FJ.View,DirectorInfoPanel.prototype.constructor=FJ.View,ImageSlideshow=function(){var a,b,c=this,d=5e3,e=0,f=new BackgroundMedia("splash-gradient-trans-black-css");f.div.style.top=2*Tool.Actions.MENU_HEIGHT+"px";var g=.3,h=!1;this.dispatcher=new FJ.EventDispatcher;var i=function(){var c=Math.min(b.length,3),g=b[e%c];f.load(g),e++,b.length>1&&(a=setTimeout(i,d))};this.media=function(){return f},this.loadGallery=function(d){return d.splashImages&&0!=d.splashImages.length?(clearTimeout(a),b=d.splashImages,e=0,h=!0,c.onScroll(0),!0):(h=!1,!1)},this.onScroll=function(c){if(h&&b){f.translate(0,c*-.5);var e=(FJ.MathUtil.clamp(20,100,c)-20)/80;f.setOverlayOpacity(g+e*(1-g)),c>0?(clearTimeout(a),a=0):a||b.length>1&&(a=setTimeout(i,d))}},this.onResize=function(){f.resize()},this.disable=function(){b&&(clearTimeout(a),f.setDisplay("none"),h=!1)},this.enable=function(){b&&(h=!0,f.setDisplay("block"),i())}};var ExtendedVideoControls=function(){var a=this;VideoControls.call(this);var b=new FJ.ElementWrapper(document.createElement("div")),c=new FJ.ElementWrapper(document.createElement("div")),d=new FJ.ElementWrapper(document.createElement("div"));b["class"]("prev"),c["class"]("next"),d["class"]("counter"),this.add(b),this.add(c),this.add(d);var e=function(){a.onNext&&a.onNext()},f=function(){a.onPrev&&a.onPrev()};b.registerClick(f),c.registerClick(e),this.onNext=null,this.onPrev=null,this.updateCounter=function(a,b){d.div.innerHTML="<span>"+a+"/"+b+"</span>"}};ExtendedVideoControls.prototype=new VideoControls,ExtendedVideoControls.prototype.constructor=VideoControls;
//# sourceMappingURL=desktop_min.map